<!DOCTYPE html>
<html>

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width">
<link rel="icon" href=/fav.png type="image/gif">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>


<link rel="stylesheet" href="/css/font.css" media="all">



  
    
      
    
  


<meta property="og:url" content="http://localhost:1313/post/learn-me-a-haskell/">
  <meta property="og:site_name" content="Priydarshi Singh">
  <meta property="og:title" content="Learn Me a Haskell">
  <meta property="og:description" content="So I wrote my first Haskell program. And I love it!">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2020-05-04T06:57:17+05:30">
    <meta property="article:modified_time" content="2020-05-04T06:57:17+05:30">
    <meta property="article:tag" content="Haskell">
    <meta property="article:tag" content="Functional-Programming">
    <meta property="article:tag" content="Programming-Languages">
    <meta property="og:image" content="http://localhost:1313/post/learn-me-a-haskell/featured.png">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/post/learn-me-a-haskell/featured.png">
  <meta name="twitter:title" content="Learn Me a Haskell">
  <meta name="twitter:description" content="So I wrote my first Haskell program. And I love it!">


<link rel="stylesheet" href="/bootstrap-5/css/bootstrap.min.css" media="all"><link rel="stylesheet" href="/css/header.css" media="all">
<link rel="stylesheet" href="/css/footer.css" media="all">


<link rel="stylesheet" href="/css/theme.css" media="all">

<style>
    :root {
        --text-color: #343a40;
        --text-secondary-color: #6c757d;
        --background-color: #eaedf0;
        --secondary-background-color: #64ffda1a;
        --primary-color: #007bff;
        --secondary-color: #f8f9fa;

         
        --text-color-dark: #e4e6eb;
        --text-secondary-color-dark: #b0b3b8;
        --background-color-dark: #18191a;
        --secondary-background-color-dark: #212529;
        --primary-color-dark: #ffffff;
        --secondary-color-dark: #212529;
    }
    body {
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: left;
    }

    html {
        background-color: var(--background-color) !important;
    }

    body::-webkit-scrollbar {
        height: 0px;
        width: 8px;
        background-color: var(--background-color);
    }

    ::-webkit-scrollbar-track {
        border-radius: 1rem;
    }

    ::-webkit-scrollbar-thumb {
        border-radius: 1rem;
        background: #b0b0b0;
        outline: 1px solid var(--background-color);
    }

    #search-content::-webkit-scrollbar {
        width: .5em;
        height: .1em;
        background-color: var(--background-color);
    }
</style>



<meta name="description" content="">
<link rel="stylesheet" href="/css/single.css">


<script defer src="/fontawesome-6/all-6.4.2.js"></script>


  
  

  <title>
Learn Me a Haskell | Priydarshi Singh

  </title>
</head>

<body class="light">
  
  
<script>
    let localStorageValue = localStorage.getItem("pref-theme");
    let mediaQuery = window.matchMedia('(prefers-color-scheme: dark)').matches;

    switch (localStorageValue) {
        case "dark":
            document.body.classList.add('dark');
            break;
        case "light":
            document.body.classList.remove('dark');
            break;
        default:
            if (mediaQuery) {
                document.body.classList.add('dark');
            }
            break;
    }
</script>





<header id="profileHeader">
    <nav class="pt-3 navbar navbar-expand-lg ">
        <div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5">
            
            <a class="navbar-brand primary-font text-wrap" href="/">
                
                
                
            </a>

            
                <div>
                    <input id="search" autocomplete="off" class="form-control mr-sm-2 d-none d-md-block" placeholder='Ctrl &#43; k to Search...'
                        aria-label="Search" oninput="searchOnChange(event)">
                </div>
            

            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
                    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
                </svg>
            </button>

            
            <div class="collapse navbar-collapse text-wrap primary-font" id="navbarContent">
                <ul class="navbar-nav ms-auto text-center">
                    
                        <li class="nav-item navbar-text d-block d-md-none">
                            <div class="nav-link">
                                <input id="search" autocomplete="off" class="form-control mr-sm-2" placeholder='Ctrl &#43; k to Search...' aria-label="Search" oninput="searchOnChange(event)">
                            </div>
                        </li>
                    

                    

                    

                    

                    

                    

                    

                    

                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="#about" title="">
                            
                            Home
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="#experience" title="">
                            
                            Experience
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="#posts" title="">
                            
                            Posts
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="#projects" title="">
                            
                            Projects
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="#contact" title="">
                            
                            Contact
                        </a>
                    </li>
                    
                    

                    
                    <li class="nav-item navbar-text">
                        
                        <div class="text-center">
                            <button id="theme-toggle">
                                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                            </button>
                        </div>
                    </li>
                    

                </ul>

            </div>
        </div>
    </nav>
</header>
<div id="content">
<section id="single">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-md-12 col-lg-9">
        <div class="pr-lg-4">
          <div class="title mb-5">
            <h1 class="text-center mb-4">Learn Me a Haskell</h1>
            <div class="text-center">
              
              May 4, 2020

              
              <span id="readingTime">
                min read
              </span>
              
            </div>
          </div>
          
          <div class="featured-image">
            <img class="img-fluid mx-auto d-block" src="#ZgotmplZ" alt="Learn Me a Haskell">
          </div>
          
          <article class="page-content  p-2">
          <h2 id="iitkbucks">IITKBucks</h2>
<p>I am mentoring a project titled IITKBucks, as a part of Programming Club&rsquo;s Summer Camp 2020. In this project, we&rsquo;ll explore blockchains and cryptocurrencies by building our own cryptocurrency.</p>
<p>Last night, I gave the students an assignment - a very simplified mining problem. The task was to take a string input from the user and find an integer nonce value such that the SHA256 hash of the concatenation of the input and the nonce is less than a fixed target.</p>
<p>I had been planning to start with functional programming since long, and with this assignment I had an opportunity.</p>
<h2 id="why-arent-arch-and-haskell-friends">Why aren&rsquo;t Arch and Haskell friends?</h2>
<p>Sadly, we can&rsquo;t just do <code>ghc filename.hs</code> to compile Haskell code on Arch. We need to mandatorily pass a <code>-dynamic</code> flag to GHC. I haven&rsquo;t compiled Haskell code on other OSes, but from what I&rsquo;ve read, I believe this is an Arch-only issue.</p>
<p>Also, due to this same reason, <code>cabal install</code> fails by default. Cabal is unable to build the libraries. So we need to update the Cabal config file. Thankfully, everything is very well documented in the ArchWiki, and I didn&rsquo;t have to turn to other sources.</p>
<h2 id="beginners-notes">Beginner&rsquo;s notes</h2>
<p>There was nothing particularly despicable about Haskell (for comparison, read <a href="https://dryairship.github.io/post/my-first-rust-program/">my blog post on Rust</a>). Everything seemed logical. Or maybe it was the fact that since this entire paradigm of functional programming was new to me, I chose to explore and appreciate it like a maze, instead of nitpicking over minor inconveniences.</p>
<p>It took me some time to understand why functions with multiple parameters are declared the way they are, but the reason seemed to fit perfectly into the general ideology of the language.</p>
<p>I absolutely loved the <code>show</code> function, perhaps because I&rsquo;ve been irritated by the way other languages handle integer to string conversions :p. I also fell in love with the apply operator <code>$</code>, and would like to admit that I tried to overuse it. :p</p>
<p>I was able to easily build two functions - <code>getSHA256Hash</code> to calculate the SHA256 hash of a string, and <code>isValid</code> to check if the hash is below the target. I now needed to iterate over the nonce values to try to find one that worked.</p>
<h2 id="running-back-to-imperative-languages">Running back to imperative languages</h2>
<p>The above task would be pretty simple in an imperative language. I needed something like the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">10000000</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> { 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">isValid</span>(<span style="color:#a6e22e">getSHA256Hash</span>(<span style="color:#a6e22e">input</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">to_string</span>(<span style="color:#a6e22e">i</span>))) {
</span></span><span style="display:flex;"><span>        print(<span style="color:#a6e22e">i</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>But apparently, Haskell doesn&rsquo;t have loops. However, searching for <em>&ldquo;for loop in haskell&rdquo;</em> led me to the functions <code>forM</code> and <code>forM_</code> of <code>Control.Monad</code>. And I ended up writing some code like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hs" data-lang="hs"><span style="display:flex;"><span><span style="color:#a6e22e">forM_</span> [<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">1000000</span>] <span style="color:#f92672">$</span> <span style="color:#a6e22e">\</span>nonce <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> hsh <span style="color:#f92672">=</span> getSHA256Hash <span style="color:#f92672">$</span> input <span style="color:#f92672">++</span> show nonce
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> isValid hsh
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">then</span> putStrLn <span style="color:#f92672">$</span> <span style="color:#e6db74">&#34;Nonce = &#34;</span> <span style="color:#f92672">++</span> show nonce
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> return ()
</span></span></code></pre></div><p>This worked well. However, since there was no break statement, it wouldn&rsquo;t stop after finding a valid nonce value, and would print as many valid values as it could find, in that range. So I started looking for a <code>break</code> equivalent in Haskell. Dum Dum. I could find nothing.</p>
<h2 id="eureka">Eureka</h2>
<p>Instead, somewhere on StackOverflow or Reddit, I found a comment, which asked the OP to change their code to use a recursive function. And at that moment it struck me. It seemed as if everything was crystal clear. I quickly created a recursive function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hs" data-lang="hs"><span style="display:flex;"><span><span style="color:#a6e22e">findNonce</span> <span style="color:#f92672">::</span> <span style="color:#66d9ef">String</span> <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">Integer</span> <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">Integer</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">findNonce</span> input currentNonce
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> isValid hsh <span style="color:#f92672">=</span> currentNonce
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">|</span> otherwise <span style="color:#f92672">=</span> findNonce input (currentNonce<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">where</span> hsh <span style="color:#f92672">=</span> getSHA256Hash <span style="color:#f92672">$</span> input <span style="color:#f92672">++</span> show currentNonce
</span></span></code></pre></div><h4 id="bonus-1">Bonus 1</h4>
<p>It uses guards !!!</p>
<h4 id="bonus-2">Bonus 2</h4>
<p>It compiled without an error, in the very first try. And it worked exactly as expected.</p>
<p>This was too much happiness for me to handle, so I took a tour of my entire house, at 4 in the morning. At that moment, it seemed to me as if these 5 lines were the most beautiful piece of code I&rsquo;d ever written. :D</p>
<h2 id="conclusion">Conclusion</h2>
<p>No conclusion. It&rsquo;s 10 in the morning, and it&rsquo;s time for me to sleep. More FP blog posts coming up later, perhaps. :p</p>

          </article>
        </div>
      </div>
      <div class="col-sm-12 col-md-12 col-lg-3">
        <div id="stickySideBar" class="sticky-sidebar">
          
          <aside class="toc">
              <h5>
                Table Of Contents
              </h5>
              <div class="toc-content">
                <nav id="TableOfContents">
  <ul>
    <li><a href="#iitkbucks">IITKBucks</a></li>
    <li><a href="#why-arent-arch-and-haskell-friends">Why aren&rsquo;t Arch and Haskell friends?</a></li>
    <li><a href="#beginners-notes">Beginner&rsquo;s notes</a></li>
    <li><a href="#running-back-to-imperative-languages">Running back to imperative languages</a></li>
    <li><a href="#eureka">Eureka</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
              </div>
          </aside>
          

          
          <aside class="tags">
            <h5>Tags</h5>
            <ul class="tags-ul list-unstyled list-inline">
              
              <li class="list-inline-item"><a href="http://localhost:1313/tags/haskell"
                target="_blank"
              >haskell</a></li>
              
              <li class="list-inline-item"><a href="http://localhost:1313/tags/functional-programming"
                target="_blank"
              >functional-programming</a></li>
              
              <li class="list-inline-item"><a href="http://localhost:1313/tags/programming-languages"
                target="_blank"
              >programming-languages</a></li>
              
            </ul>
          </aside>
          

          
          <aside class="social">
            <h5>Social</h5>
            <div class="social-content">
              <ul class="list-inline">
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2flocalhost%3a1313%2fpost%2flearn-me-a-haskell%2f">
                    <i class="fab fa-linkedin"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://twitter.com/share?text=Learn%20Me%20a%20Haskell&url=http%3a%2f%2flocalhost%3a1313%2fpost%2flearn-me-a-haskell%2f">
                    <i class="fab fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://api.whatsapp.com/send?text=Learn%20Me%20a%20Haskell: http%3a%2f%2flocalhost%3a1313%2fpost%2flearn-me-a-haskell%2f">
                    <i class="fab fa-whatsapp"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href='mailto:?subject=Learn%20Me%20a%20Haskell&amp;body=Check%20out%20this%20site http%3a%2f%2flocalhost%3a1313%2fpost%2flearn-me-a-haskell%2f'>
                    <i class="fa fa-envelope"></i>
                  </a>
                </li>
              </ul>
            </div>
          </aside>
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-9 p-4">
        <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dryairship" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
  </div>
  <button class="p-2 px-3" onclick="topFunction()" id="topScroll">
    <i class="fas fa-angle-up"></i>
  </button>
</section>


<div class="progress">
  <div id="scroll-progress-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<Script src="/js/scrollProgressBar.js"></script>


<script>
  var topScroll = document.getElementById("topScroll");
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      topScroll.style.display = "block";
    } else {
      topScroll.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }

  
  let stickySideBarElem = document.getElementById("stickySideBar");
  let stickyNavBar =  false ;
  if(stickyNavBar) {
    let headerElem = document.getElementById("profileHeader");
    let headerHeight = headerElem.offsetHeight + 15;
    stickySideBarElem.style.top = headerHeight + "px";
  } else {
    stickySideBarElem.style.top = "50px";
  }
</script>


<script src="/js/readingTime.js"></script>



  </div><footer>
    
 

<div class="text-center pt-2">
    

    

    

    

    
</div><div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-4 text-center">
            
            &copy; 2024  All Rights Reserved
            <div class="text-secondary">
                Made with
                <span class="text-danger">
                    &#10084;
                </span>
                and
                <a href="https://github.com/gurusabarish/hugo-profile" target="_blank"
                    title="Designed and developed by gurusabarish">
                    Hugo Profile
                </a>
            </div>
        </div>
    </div>
</div>
</footer><script src="/bootstrap-5/js/bootstrap.bundle.min.js"></script>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

</script>


    <script src="/js/search.js"></script>











  <section id="search-content" class="py-2">
    <div class="container" id="search-results"></div>
  </section>
</body>

</html>
